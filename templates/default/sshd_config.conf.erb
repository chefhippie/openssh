# Generated by Chef for <%= node["fqdn"] %>
AddressFamily inet

<% Array(@port).each do |port| %>
Port <%= port %>
<% end %>

<% Array(@listen).each do |listen| %>
ListenAddress <%= listen %>
<% end %>

Protocol 2

<%- @host_keys.each do |key| -%>
HostKey <%= key %>
<%- end -%>

MACs <%= @macs.join(",") %>
KexAlgorithms <%= @kex_algorithms.join(",") %>
Cyphers <%= @cyphers.join(",") %>

PermitRootLogin <%= @permit_root_login %>
RSAAuthentication <%= @rsa_authentication %>
PubkeyAuthentication <%= @pubkey_authentication %>
StrictModes <%= @strict_modes %>
IgnoreRhosts <%= @ignore_rhosts %>
PasswordAuthentication <%= @password_authentication %>
X11Forwarding <%= @x11_forwarding %>
PrintLastLog <%= @print_last_log %>
TCPKeepAlive <%= @tcp_keep_alive %>
UsePAM <%= @use_pam %>
ChallengeResponseAuthentication <%= @challenge_response_authentication %>
AllowAgentForwarding <%= @allow_agent_forwarding %>
AllowTcpForwarding <%= @allow_tcp_forwarding %>
X11UseLocalhost <%= @x11_use_localhost %>
UseDNS <%= @use_dns %>

RhostsRSAAuthentication <%= @rhost_rsa_authentication %>
HostbasedAuthentication <%= @hostbased_authentication %>
IgnoreUserKnownHosts <%= @ignore_user_known_hosts %>
PermitEmptyPasswords <%= @permit_empty_passwords %>
PermitUserEnvironment <%= @permit_user_environment %>
PermitTunnel <%= @permit_tunnel %>
PrintMotd <%= @print_motd %>
GatewayPorts <%= @gateway_ports %>
UseLogin <%= @use_login %>

#KerberosAuthentication no
#KerberosOrLocalPasswd yes
#KerberosTicketCleanup yes
#KerberosGetAFSToken no

#GSSAPIAuthentication no
#GSSAPICleanupCredentials yes
#GSSAPIEnableMITMAttack no

KeyRegenerationInterval 3600
ServerKeyBits 1024
LoginGraceTime 120
MaxAuthTries 5
MaxSessions 10
X11DisplayOffset 10
ClientAliveInterval 0
ClientAliveCountMax 3
MaxStartups 10

SyslogFacility AUTH
LogLevel INFO

ChrootDirectory none
Compression delayed
UsePrivilegeSeparation sandbox

PidFile /var/run/sshd.pid

AuthorizedKeysFile .ssh/authorized_keys
AuthorizedPrincipalsFile none

Banner none
Subsystem sftp /usr/lib/ssh/sftp-server

AcceptEnv LANG LC_*
